<div class="bar-stable">
    <ion-header-bar class="bar-stable bar bar-header" align-title="center">
        <div class="buttons buttons-left header-item">
            <span class="left-buttons">
        <button class="button button-icon button-clear ion-navicon" ui-sref="app.profile">
        </button>
      </span>
        </div>
        <div class="title title-center header-item"> {{'main_page_title' |translate}}
        </div>
        <div class="lang-div">
            <span class=" header-right-button  header-item">
             <select class=" header-right-button" ng-model="language" ng-options="lang.key as lang.value for lang in langOptions" ng-change="updateLang(language)"></select>
        </span>
        </div>

    </ion-header-bar>
</div>
<ion-view view-title="Поисковик лекарств" animation="no-animation">
    <ion-content>

        <div class="ma-main-title">
            <!--
            <button ng-click="updateLang('ru')">Rus</button>
-->
            <img src="img/logo_medd.png">
            <!--
            <button ng-click="updateLang('uz')">Uz</button>
-->
        </div>

        <form>

            <ion-toolbar>
                <div class="ma-search-where">
                    <fieldset>
                        <legend class="ma-search-title">{{'where_ts' | translate}}</legend>
                        <div class="list input-item">
                            <div class="search-div">
                                <input type="text" placeholder="{{'where_ts_pl' | translate}}" ng-model="searchPlace" uib-typeahead="dist as dist.name for dist in districts | filter:$viewValue" typeahead-focus-first="true" style="width:100%" />
                                <i class="ion-android-close" ng-click="searchPlace=''"></i>
                            </div>
                            <!-- <pre>{{medicines}}</pre>-->
                            <!--<span ng-repeat="med in medicines">{{med.price}}</span>-->

                        </div>
                        <!--<div class="list">
                            <ion-checkbox ng-model="filter.red">Поиск поблизости</ion-checkbox>
                            <label></label>
                        </div>-->
                    </fieldset>
                </div>
                <!--<ion-list>
      <ion-item ng-repeat="playlist in playlists" href="#/app/playlists/{{playlist.id}}">
        {{playlist.title}}
      </ion-item>
    </ion-list> -->


                <div class="ma-search-what">

                    <fieldset>
                        <legend class="ma-search-title">{{'what_ts' | translate}}</legend>

                        <div class="button-bar">
                            <div class="button-blue-active" ng-class="{'button-blue-clinic': isActive('clinic')}"></div>
                            <button type="button" ng-class="{'button-positive': isActive('medicine')}" class="button button-first" ng-click="setActive('medicine')">{{'what_ts_med' | translate}} </button>
                            <button type="button" ng-class="{'button-positive': isActive('clinic')}" class="button" ng-click="setActive('clinic')">{{'what_ts_cli' | translate}} </button>
                        </div>
                        <!--ng-class="{'button-positive': isActive('clinic')}" -->
                        <div class="list input-item">
                            <div class="ma-typeahead-input" ng-style="isActive('clinic') ? { 'margin':'0 10px'} : { 'margin':'0 30px'}">
                                <div ng-if="isActive('medicine')" class="what-to-search">
                                    <input type="text" placeholder="{{'what_ts_pl1' | translate}}" required ng-model="selectedMedicine" uib-typeahead="med as med.name for med in fetchdata($viewValue)" typeahead-focus-first="true" typeahead-on-select="setMedicine(selectedMedicine);" ng-required="isActive('medicine')" />
                                    <i class="ion-android-close" ng-click="selectedMedicine='';setMedicine('')"></i>
                                </div>
                                <!-- typeahead-wait-ms="1000"-->

                                <div ng-if="isActive('clinic')" class="what-to-search">
                                    <input type="text" placeholder="{{'what_ts_pl2' | translate}}" required ng-model="selectedClinic" uib-typeahead="cli as cli.name for cli in specializations | filter:$viewValue" typeahead-focus-first="true" typeahead-on-select="setClinic(selectedClinic);" ng-required="isActive('clinic')" /> <i class="ion-android-close" ng-click="selectedClinic='';setClinic('')"></i>
                                </div>
                            </div>
                            <!--<pre>{{medicines | json}}</pre>-->

                        </div>
                    </fieldset>
                </div>
                <div class="ma-search-button">
                    <button class="search-button" ng-click="submitSearch(searchPlace)" ng-disabled="!selectedMedicine && !selectedClinic">
                        <a class="search-button">{{'what_ts_med_find' | translate}}</a>
                    </button>
                </div>
            </ion-toolbar>
        </form>

    </ion-content>
</ion-view>