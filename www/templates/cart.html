<div class="bar-stable">
    <ion-header-bar class="bar-stable bar bar-header" align-title="center" ng-if="!medMapPresent">
        <button ui-sref="app.medicines" class="button back-button buttons button-clear header-item">
            <i class="flaticon-left-arrow"></i> 
            <span class="back-text">
                <div class="default-title medicine-search-title">{{'sr_title' | translate}}</div>
                <span class="previous-title hide"></span>
            </span>
        </button>
        <!-- <div class="header-img-class"> <img  width="200" src="img/logo_medd.png">{{'main_page_title' | translate}}  title title-center header-item
        </div>-->

        <button class="button header-right-button buttons button-clear header-item" ui-sref="app.myCart"><i class="flaticon-shopping-cart"></i> <span class="order-count"><span>{{shoppingCart.length}}</span></span>
        </button>
    </ion-header-bar>

    <ion-header-bar class="bar-stable bar bar-header" align-title="center" ng-if="medMapPresent">
        <button ng-click="showMapMed()" class="button back-button buttons button-clear header-item">
            <i class="flaticon-left-arrow"></i> 
            <span class="back-text">
                <div class="default-title medicine-search-title">Назад</div>
                <span class="previous-title hide"></span>
            </span>
        </button>
    </ion-header-bar>
</div>
<ion-view view-title="Search" animation="no-animation">
    <ion-content class="no-header">
        <div class="ma-results ma-my-cart">
            <div class="result-header-wrapper">
                <div class="ma-search-name">
                    <span>{{'cart_title' | translate}}<span ng-if="!shoppingCart.length"> {{'cart_title1' | translate}}</span></span>
                </div>
            </div>


            <!--  MAP DIV TO SHOW THE PHARMACY LOCATION  -->
            <div class="medicineMapView" style="height:100%">
                <ng-map default-style="false" center="tashkent" zoom="12" style="height:100% !important; width:100%;">
                    <marker id="foo" position="{{cartMap}}" on-click="map.showInfoWindow(event, 'bar')">
                    </marker>
                    <directions draggable="true" travel-mode="DRIVING" origin="{{lat}}, {{long}}" destination="{{cartMap}}">
                    </directions>
                    <!-- <marker position="current" animation="Animation.BOUNCE" centered="true"></marker>-->
                    <custom-marker id="can" position="{{lat}}, {{long}}" on-click="click()">
                        <div>
                            <img src="img/map-icon.png" width="40" height="40" />
                        </div>
                    </custom-marker>
                    <info-window id="bar" max-width="200">
                        <div ng-non-bindable>
                            <div id="siteNotice"></div>
                            <div id="bodyContent">
                                <p>
                                    <b>{{clinicName}}</b>
                                </p>
                            </div>
                        </div>
                    </info-window>
                </ng-map>
            </div>
            <!-- END OF MAP SHOW   -->

            <div class="ma-results-wrapper">
                <div class="medicine-result" ng-repeat="cart in shoppingCart track by $index">
                    <div class="mr-top">
                        <img width="60" height="60" class="product-photo" ng-src="{{'http://medappteka.uz'+cart.med_photo}}" />
                        <div class="product-info">
                            <div>{{'cart_product' | translate}}: <span>{{cart.med_name}} </span></div>
                            <div>{{'sr_pharmacy' | translate}}: <span>{{cart.pharmacy_name}}</span></div>
                            <div>{{'sr_address' | translate}}: <span>{{cart.pharmacy_address}} </span></div>
                        </div>
                    </div>
                    <div class="mr-bottom">
                        <ul>
                            <li class="button button-light map-button" ng-click="showMapMed(cart)"><i class="flaticon-placeholder" style="bottom:3px"></i> <span class="hide-on-small">{{'sr_map' | translate}}</span></li>
                            <li class=""> 
                                <a ng-href="tel:{{cart.pharmacy_phone}}" class="button button-positive call-button">
                                    <i class="flaticon-call-answer" style="bottom:3px"></i>  
                                    <span class="hide-on-small">{{'sr_call' | translate}} </span>
                                </a>
                            </li>
                            <li class="button button-energized price-button">
                                {{cart.med_price | formatPrice}} <span class="sum">{{'sr_sum' | translate}}</span></li>
                        </ul>
                    </div>
                    <div class="list med-quantity">
                        <ion-item>
                            <div class="list">
                                <label class="item item-input item-select">
                                    <div class="input-label"> {{'cart_choose_quantity' | translate}}</div>
                                    <select ng-model="cart.count" class="quantity-select" ng-options="q.val as q.val for q in quantity">
                                    </select>
                                </label>
                                <div class="cart-subtotal">
                                    <span>{{'cart_subtotal' | translate}} : </span> {{cart.med_price * cart.count | formatPrice}}
                                    <div class="remove-order" ng-click="removeFromCart($index)">{{'cart_remove' | translate}}</div>
                                </div>
                            </div>
                        </ion-item>
                    </div>
                </div>

                <div ng-if="shoppingCart.length" class="cart-total">{{'cart_total' | translate}}: <br> <span> {{getTotal()}} {{ 'sr_sum' | translate}}</span></div>
                <button ng-if="shoppingCart.length" class="proceed-checkout" ui-sref="app.checkout">{{'cart_checkout' | translate}} 
                    <i class="flaticon-right-arrow"></i>
                </button>
            </div>
        </div>
    </ion-content>
</ion-view>